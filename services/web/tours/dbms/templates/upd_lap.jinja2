{% extends 'layout.jinja2' %}

{% block header %}
	<div class="w3-display-container" style="display: none">
    <h1>{% block title %}Aggiorna tappa{% endblock %}</h1>
  </div>
{% endblock %}

{% block content %}
<div class="w3-card-4" style="max-width: 620px; margin:auto; margin-top: 60px">
    <div class="w3-container w3-theme-d2">
      <h2 class="w3-center">Aggiorna Tappa</h2>
      <h3 class="w3-center">{{ lap.start }} - {{ lap.destination }}</h3>
    </div>

  <form method="POST" enctype="multipart/form-data">
    {{ form.csrf_token }}
    <div class="w3-container">
        <div class="w3-row">
            <div class="w3-col m4 w3-mobile">
                <p class="w3-left-align wbold form_label">{{ form.date.label(class="w3-theme-l4 w3-left-align") }}</p>
            </div>
            <div class="w3-col m8 w3-mobile">
                {# {% set lap_date = lap.date.strftime('%d/%m/%Y') %} #}
                <p class="w3-left-align">{{ form.date(class="w3-input w3-theme-l4", value=lap.date.strftime('%d/%m/%Y'), pattern="^(3[01]|[12][0-9]|0?[1-9])(-|\/|\.)(1[0-2]|0?[1-9])\\2([0-9]{2})?[0-9]{2}$") }}
            </div>

            <div class="w3-col m4 w3-mobile">
              <p class="w3-left-align wbold form_label">{{ form.distance.label(class="w3-theme-l4") }}</p>
            </div>
            <div class="w3-col m8 w3-mobile">
              <p class="w3-left-align">{{ form.distance(class="w3-input w3-theme-l4") }}</p>
            </div>

            <div class="w3-col m4 w3-mobile">
              <p class="w3-left-align wbold form_label">{{ form.ascent.label(class="w3-theme-l4") }}</p>
            </div>
            <div class="w3-col m8 w3-mobile">
              <p class="w3-left-align">{{ form.ascent(class="w3-input w3-theme-l4") }}</p>
            </div>

            <div class="w3-col m4 w3-mobile">
              <p class="w3-left-align wbold form_label">{{ form.descent.label(class="w3-theme-l4") }}</p>
            </div>
            <div class="w3-col m8 w3-mobile">
              <p class="w3-left-align">{{ form.descent(class="w3-input w3-theme-l4") }}</p>
            </div>

            <div class="w3-col m4 w3-mobile">
              <p class="w3-left-align wbold form_label">{{ form.duration.label(class="w3-theme-l4") }}</p>
            </div>
            <div class="w3-col m8 w3-mobile">
              <p class="w3-left-align">{{ form.duration(class="w3-input w3-theme-l4", placeholder="HH:MM:SS", pattern="^(2[0-4]|[1][0-9]|0?[0-9]):([1-5][0-9]|0?[0-9])(:([1-5][0-9]|0?[0-9]))?$") }}</p>
            </div>

            <div class="w3-col m4 w3-mobile">
              <p class="w3-left-align wbold form_label">{{ form.gpx.label(class="w3-theme-l4") }}</p>
            </div>
            <div class="w3-col m8 w3-mobile">
              <p class="w3-left-align">{{ form.gpx(class="w3-input w3-theme-l4") }}</p>
            </div>

        </div>

        <p>
        {% if lap.done %}
            {{ form.done(checked='checked', class="w3-theme-l4 w3-center", style="margin-left: 40%") }} {{ form.done.label }}
        {% else %}
            {{ form.done(class="w3-theme-l4 w3-center", style="margin-left: 40%") }} {{ form.done.label }}
        {% endif %}
        </p>

        <p>
            {{ form.submit(class="w3-button w3-block w3-theme-action w3-hover-theme-d2 w3-ripple w3-center") }}
        </p>
    </div>
  </form>
</div>
{% endblock %}
