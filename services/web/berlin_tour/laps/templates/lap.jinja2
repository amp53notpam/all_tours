{% extends 'layout.jinja2' %}

{% block base %}<base target="_blank">{% endblock %}

{% block styles %}
	h1 {
		color: #cddc39
		letter-spacing: 5px;
		font-size: 2rem;
    margin-top: 50px;
	}
  h2 {
    margin-top: 50px;
    margin-bottom: 60px;
    }
  p, a {
    font-size: 1.2rem;
  }
  .row:nth-of-type(even) {
    background-color: #ffffcc;
  }
  .row:nth-of-type(odd) {
    background-color: #f0e68c;
  }

{% endblock %}

{% block header %}
	<div class="w3-display-container" style="height: 160px">
		<h2 class="w3-display-middle">{% block title %}Tappa {{ lap.start }} - {{ lap.destination }}{% endblock %}</h2>
	</div>
{% endblock %}

{% block content %}
<div style="margin: 100px 20% 0 10%">
  <div class="row w3-row w3-container">
    <div class="w3-col l3 m3 s5">
      <p class="w3-left-align">Data:</p>
    </div>
    <div class="w3-col l4 m3 s5">
      <p class="w3-left-align">{{ lap.date.strftime("%A %d %b") }}</p>
    </div>
  </div>

  {% if lap.distance %}
  <div class="row w3-row w3-container">
    <div class="w3-col l3 m3 s5">
      <p class="w3-left-align">Distanza:</p>
    </div>
    <div class="w3-col l4 m3 s5">
      <p class="w3-left-align">{{ lap.distance }} Km</p>
    </div>
  </div>
  {% endif %}

  {% if lap.ascent %}
  <div class="row w3-row w3-container">
    <div class="w3-col l3 m3 s5">
      <p class="w3-left-align">Dislivello salita:</p>
    </div>
    <div class="w3-col l4 m3 s5">
      <p class="w3-left-align">{{ lap.ascent }} m</p>
    </div>
  </div>
  {% endif %}

  {% if lap.descent %}
  <div class="row w3-row w3-container">
    <div class="w3-col l3 m3 s5">
      <p class="w3-left-align">Dislivello discesa:</p>
    </div>
    <div class="w3-col l4 m3 s5 w3">
      <p class="w3-left-align">{{ lap.descent }} m</p>
    </div>
  </div>
  {% endif %}

  {% if lap.duration %}
  <div class="row w3-row w3-container">
    <div class="w3-col l3 m3 s5">
      <p class="w3-left-align">Tempo previsto:</p>
    </div>
    <div class="w3-col l4 m3 s5">
      <p class="w3-left-align">{{ lap.duration.strftime("%H:%M") }}</p>
    </div>
  </div>
  {% endif %}

  {% if lap.distance and lap.duration %}
  <div class="row w3-row w3-container">
    <div class="w3-col l3 m3 s5">
      <p class="w3-left-align">Media prevista:</p>
    </div>
    <div class="w3-col l4 m3 s5">
      {% set media = lap.distance * 1000 / ( lap.duration.hour * 3600 + lap.duration.minute *60) * 3.6 %}
      <p class="w3-left-align">{{ media|round(2) }} Km/h</p>
    </div>
  </div>
  {% endif %}

  {% if lap.gpx %}
  <div class="row w3-row w3-container">
    <div class="w3-col l3 m3 s5">
      <p class="w3-left-align">Traccia gpx:</p>
    </div>
    <div class="w3-col l4 m3 s5">
       <p class="w3-left-align"><a href='{{ url_for("static", filename=lap.gpx) }}'>{{ lap.start }}-{{ lap.destination }}</a></p>
    </div>
  </div>
  {% endif %}
      
  {% if lap.hotels %}
  <div class="row w3-row w3-container">
    <div class="w3-col l3 m3 s5">
      <p class="w3-left-align">Alberghi:</p>
    </div>
    <div class="w3-col l4 m3 s5">
      {% for hotel in lap.hotels %}
        <p class="w3-left-align"><a href='{{ url_for("lap_bp.albergo", id=hotel.id) }}' target="_blank">{{ hotel.name }}</a></p>
      {% endfor %}
    </div>
  </div>
  {% endif %}
    
</div>
{% endblock %}